"use strict";(self.webpackChunkReportGeneration=self.webpackChunkReportGeneration||[]).push([[829],{4829:(w,f,p)=>{p.r(f),p.d(f,{PropertiesRoutingModule:()=>O});var u=p(4937),n=p(9417),y=p(1413),h=p(6977),d=p(980),v=p(1699),t=p(4438),b=p(6689),F=p(2177),j=p(1530),g=p(177),m=p(5447);function E(s,l){if(1&s&&(t.j41(0,"div",27)(1,"div",28)(2,"div",6)(3,"div",7),t.nrm(4,"input",8),t.j41(5,"label",29),t.EFF(6,"Name"),t.k0s(),t.j41(7,"small",10),t.EFF(8),t.k0s()()(),t.j41(9,"div",6)(10,"div",7),t.nrm(11,"input",8),t.j41(12,"label",30),t.EFF(13,"Value"),t.k0s(),t.j41(14,"small",10),t.EFF(15),t.k0s()()(),t.j41(16,"div",6)(17,"div",7)(18,"select",12)(19,"option",13),t.EFF(20,"Select"),t.k0s(),t.j41(21,"option",14),t.EFF(22,"Active"),t.k0s(),t.j41(23,"option",15),t.EFF(24,"Inactive"),t.k0s()(),t.j41(25,"label",16),t.EFF(26,"Active Status"),t.k0s(),t.j41(27,"small",10),t.EFF(28),t.k0s()()()()()),2&s){const e=l.index,r=t.XpG();t.R7$(),t.Y8G("formGroupName",e),t.R7$(3),t.Y8G("formControlName","description"),t.R7$(4),t.JRh(r.getErrorMessageFormArray(e,"description","Name")),t.R7$(3),t.Y8G("formControlName","value"),t.R7$(4),t.JRh(r.getErrorMessageFormArray(e,"value","Value")),t.R7$(3),t.Y8G("formControlName","status"),t.R7$(10),t.JRh(r.getErrorMessageFormArray(e,"status","Status"))}}let C=(()=>{class s{constructor(e,r,o,i,a,c){this.router=e,this.route=r,this.fb=o,this.globalService=i,this.propertyService=a,this.spinner=c,this.userId=this.globalService.getUserId(),this.isLoading=!1,this.destroy$=new y.B,this.isEdit=!1,this.propertyForm=new n.gE({}),this.propertyObj={},this.idToEdit=0,this.route.snapshot.params&&this.route.snapshot.params.propertyId&&(this.isEdit=!0,this.idToEdit=+this.route.snapshot.params.propertyId,this.getPropertiesData())}ngOnInit(){this.buildForm()}getPropertiesData(){this.isLoading=!0,this.spinner.start(),this.propertyService.viewProperty(this.idToEdit).pipe((0,h.Q)(this.destroy$),(0,d.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:e=>{console.log(e),this.propertyObj=e,this.buildForm()},error:e=>console.error(e),complete:()=>console.info("complete")})}resetForm(){this.isEdit?(this.propertyForm.reset(),this.getPropertiesData()):this.buildForm()}buildForm(){this.propertyForm=this.fb.group({propertyName:[this.propertyObj.name,[n.k0.required,n.k0.minLength(4),n.k0.maxLength(128),n.k0.pattern("^$|^([a-zA-Z]+([a-zA-Z .()-]+)*)*$")]],propertyValue:[this.propertyObj.lookupCodeSetValue,[n.k0.required,n.k0.minLength(1),n.k0.maxLength(2),n.k0.pattern("^$|^([0-9]+([0-9]+)*)*$")]],status:[this.isEdit?this.propertyObj.status?1:0:1,[n.k0.required]],propertyValues:this.fb.array([])}),this.isEdit&&this.propertyObj?.propertyValues?.length>0?this.appendChildValues():this.addPropertyValueItem()}createPropertyValueItems(e,r,o,i,a){return this.fb.group({id:[r||"",[]],description:[o||"",[n.k0.required,n.k0.minLength(1),n.k0.maxLength(128),n.k0.pattern("^$|^([0-9a-zA-Z]+([0-9a-zA-Z .()-]+)*)*$")]],value:[i||"",[n.k0.required,n.k0.minLength(1),n.k0.maxLength(2),n.k0.pattern("^$|^([0-9]+([0-9]+)*)*$")]],status:[e?a:1,[n.k0.required]]})}addPropertyValueItem(){this.propertyValues=this.propertyForm.get("propertyValues"),this.propertyValues.push(this.createPropertyValueItems(!1))}appendChildValues(){this.propertyObj.propertyValues.forEach(e=>{this.propertyValues=this.propertyForm.get("propertyValues"),this.propertyValues.push(this.createPropertyValueItems(!0,e.id,e.description,e.value,e.status?1:0))})}cancel(){this.router.navigate(["/jrm/properties/properties-list"])}getErrorMessage(e,r){let o="";return o=this.globalService.getErrorMessage(this.propertyForm,e,r),o}getErrorMessageFormArray(e,r,o){let i="",a=this.propertyValues.controls[e];return a.controls[r].touched&&(a.controls[r].hasError("required")?i=o+" required":a.controls[r].hasError("minlength")?i="Min length ("+(a.controls[r]?.errors).minlength?.requiredLength+") required":a.controls[r].hasError("maxlength")?i="Max length ("+(a.controls[r]?.errors).maxlength?.requiredLength+") exceeded":a.controls[r].hasError("pattern")&&(i="Please enter valid Pattern")),i}submit(){console.log(this.propertyForm.controls),this.propertyForm.valid?(this.isLoading=!0,this.spinner.start(),this.propertyObj.name=this.propertyForm.controls.propertyName.value,this.propertyObj.lookupCodeSetValue=Number(this.propertyForm.controls.propertyValue.value),this.propertyObj.status=1==this.propertyForm.controls.status.value,this.isEdit?(this.propertyObj.updatedById=this.userId,this.propertyValues.controls.forEach((r,o)=>{let i={};i.description=r.controls.description.value,i.value=Number(r.controls.value.value),i.status=1==r.controls.status.value;let a=this.propertyObj.propertyValues.findIndex(c=>c.id==r.controls.id.value);a>-1?(this.propertyObj.propertyValues[a].description=i.description,this.propertyObj.propertyValues[a].value=i.value,this.propertyObj.propertyValues[a].status=i.status):this.propertyObj.propertyValues.push(i)}),this.propertyService.editProperty(this.propertyObj).pipe((0,h.Q)(this.destroy$),(0,d.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:r=>{console.log(r),r?(this.globalService.showAlert("Success","Property updated successfully !"),this.router.navigate(["/jrm/properties"])):this.globalService.showAlert("Error","Unable to update Property !")},error:r=>{console.error(r),this.globalService.showAlert("Error","Error in updating Property !")},complete:()=>console.info("complete")})):(this.propertyObj.createdById=this.userId,this.propertyObj.propertyValues=[],this.propertyValues.controls.forEach(r=>{let o={};o.description=r.controls.description.value,o.value=Number(r.controls.value.value),o.status=1==r.controls.status.value,this.propertyObj.propertyValues.push(o)}),this.propertyService.addProperty(this.propertyObj).pipe((0,h.Q)(this.destroy$),(0,d.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:r=>{console.log(r),r?(this.globalService.showAlert("Success","Property created successfully !"),this.router.navigate(["/jrm/properties"])):this.globalService.showAlert("Error","Unable to create Property !")},error:r=>{console.error(r),this.globalService.showAlert("Error","Error in creating Property !")},complete:()=>console.info("complete")}))):this.globalService.showAlert("Error","Please enter all mandatory fields !")}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(u.Ix),t.rXU(u.nX),t.rXU(n.ok),t.rXU(b.d),t.rXU(F.h),t.rXU(j.eD))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-properties-form"]],standalone:!0,features:[t.aNF],decls:49,vars:9,consts:[[1,"content-cand"],[1,"container-bg"],[1,"row","m-b-10","m-0"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-4","col-lg-3","col-sm-6","col-xs-6"],[1,"floating-label-group"],["type","text",1,"form-control",3,"formControlName"],["for","propertyName",1,"floating-label","required"],[1,"errormessage"],["for","propertyValue",1,"floating-label","required"],[1,"form-control",3,"formControlName"],["value",""],["value","1"],["value","0"],["for","status",1,"floating-label","required"],[1,"col-md-10","col-lg-10","col-sm-8","col-xs-8"],["for","values",1,"floating-label-text"],[1,"col-md-2","col-lg-2","col-sm-4","col-xs-4"],["type","button","ngbTooltip","Add Property Value",1,"btn","btn-add-users",3,"click"],[1,"fas","fa-plus","fontawsome-icon"],["formArrayName","propertyValues",4,"ngFor","ngForOf"],[1,"row","mb-3"],[1,"col-md-12","text-right"],["type","button",1,"btn-closed",3,"click"],["type","submit",1,"btn-submit-all",3,"disabled"],["formArrayName","propertyValues"],[1,"row",3,"formGroupName"],["for","description",1,"floating-label","required"],["for","value",1,"floating-label","required"]],template:function(r,o){1&r&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"form",4),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(6,"div",5)(7,"div",6)(8,"div",7),t.nrm(9,"input",8),t.j41(10,"label",9),t.EFF(11,"Property Name"),t.k0s(),t.j41(12,"small",10),t.EFF(13),t.k0s()()(),t.j41(14,"div",6)(15,"div",7),t.nrm(16,"input",8),t.j41(17,"label",11),t.EFF(18,"Property Value"),t.k0s(),t.j41(19,"small",10),t.EFF(20),t.k0s()()(),t.j41(21,"div",6)(22,"div",7)(23,"select",12)(24,"option",13),t.EFF(25,"Select"),t.k0s(),t.j41(26,"option",14),t.EFF(27,"Active"),t.k0s(),t.j41(28,"option",15),t.EFF(29,"Inactive"),t.k0s()(),t.j41(30,"label",16),t.EFF(31,"Active Status"),t.k0s(),t.j41(32,"small",10),t.EFF(33),t.k0s()()()(),t.nrm(34,"hr"),t.j41(35,"div",5)(36,"div",17)(37,"label",18),t.EFF(38,"Property Values"),t.k0s()(),t.j41(39,"div",19)(40,"button",20),t.bIt("click",function(){return o.addPropertyValueItem()}),t.nrm(41,"i",21),t.k0s()()(),t.DNE(42,E,29,7,"div",22),t.j41(43,"div",23)(44,"div",24)(45,"button",25),t.bIt("click",function(){return o.resetForm()}),t.EFF(46,"Reset"),t.k0s(),t.j41(47,"button",26),t.EFF(48,"Submit"),t.k0s()()()()()()()()()),2&r&&(t.R7$(5),t.Y8G("formGroup",o.propertyForm),t.R7$(4),t.Y8G("formControlName","propertyName"),t.R7$(4),t.JRh(o.getErrorMessage("propertyName","Property Name")),t.R7$(3),t.Y8G("formControlName","propertyValue"),t.R7$(4),t.JRh(o.getErrorMessage("propertyValue","Property Value")),t.R7$(3),t.Y8G("formControlName","status"),t.R7$(10),t.JRh(o.getErrorMessage("status","Status")),t.R7$(9),t.Y8G("ngForOf",o.propertyValues.controls),t.R7$(5),t.Y8G("disabled",!o.propertyForm.valid||o.isLoading))},dependencies:[v.G,g.Sq,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.j4,n.JD,n.$R,n.v8,m.md]})}}return s})();var P=p(720);let R=(()=>{class s{transform(e,r){return e?r?e.filter(o=>Object.keys(o).some(i=>String(o[i]).toLowerCase().includes(r.toLowerCase()))):e:[]}static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275pipe=t.EJ8({name:"filter",type:s,pure:!0})}}return s})();const k=s=>["/jrm/properties/edit-property",s];function S(s,l){if(1&s&&t.nrm(0,"i",21),2&s){const e=t.XpG();t.Y8G("ngClass",e.getIcon("id"))}}function L(s,l){if(1&s&&t.nrm(0,"i",21),2&s){const e=t.XpG();t.Y8G("ngClass",e.getIcon("name"))}}function _(s,l){if(1&s&&(t.j41(0,"tr")(1,"td",22),t.EFF(2),t.k0s()()),2&s){const e=t.XpG();t.R7$(2),t.SpI("",e.isLoading?"Please wait while loading..":"No properties found.."," ")}}function I(s,l){if(1&s&&(t.j41(0,"span",28),t.EFF(1),t.k0s()),2&s){const e=l.$implicit;t.R7$(),t.SpI(" ",e.description," ")}}function V(s,l){1&s&&(t.j41(0,"span",29),t.EFF(1,"Enabled"),t.k0s())}function $(s,l){1&s&&(t.j41(0,"span",30),t.EFF(1,"Disabled"),t.k0s())}function G(s,l){if(1&s&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.DNE(6,I,2,1,"span",23),t.k0s(),t.j41(7,"td"),t.DNE(8,V,2,0,"span",24)(9,$,2,0,"span",25),t.k0s(),t.j41(10,"td")(11,"button",26),t.nrm(12,"img",27),t.k0s()()()),2&s){const e=l.$implicit;t.R7$(2),t.JRh(e.lookupCodeSetValue),t.R7$(2),t.JRh(e.name),t.R7$(2),t.Y8G("ngForOf",e.propertyValues),t.R7$(2),t.Y8G("ngIf",e.status),t.R7$(),t.Y8G("ngIf",!e.status),t.R7$(3),t.Y8G("routerLink",t.eq3(6,k,e.id))}}function T(s,l){if(1&s&&(t.j41(0,"option",41),t.EFF(1),t.k0s()),2&s){const e=l.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function N(s,l){if(1&s){const e=t.RV6();t.j41(0,"div",31)(1,"div",32)(2,"div",5)(3,"select",33),t.mxI("ngModelChange",function(o){t.eBV(e);const i=t.XpG();return t.DH7(i.paginationRequest.pageSize,o)||(i.paginationRequest.pageSize=o),t.Njj(o)}),t.bIt("change",function(o){t.eBV(e);const i=t.XpG();return t.Njj(i.onPageLimitChange(o))}),t.j41(4,"option",34),t.EFF(5,"Select"),t.k0s(),t.DNE(6,T,2,2,"option",35),t.k0s(),t.j41(7,"label",36),t.EFF(8,"Page Length"),t.k0s()()(),t.j41(9,"div",37)(10,"div",5)(11,"label",38),t.EFF(12),t.k0s()()(),t.j41(13,"div",39)(14,"div",5)(15,"app-custom-pagination",40),t.mxI("pageChange",function(o){t.eBV(e);const i=t.XpG();return t.DH7(i.page,o)||(i.page=o),t.Njj(o)}),t.bIt("pageChange",function(o){t.eBV(e);const i=t.XpG();return t.Njj(i.onPageChange(o))}),t.k0s()()()()}if(2&s){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.paginationRequest.pageSize),t.R7$(3),t.Y8G("ngForOf",e.pageLimits),t.R7$(6),t.SpI("Total Records: ",e.totalResult,""),t.R7$(3),t.Y8G("collectionSize",e.totalResult),t.R50("page",e.page),t.Y8G("pageSize",e.paginationRequest.pageSize)}}const x=[{path:"",component:(()=>{class s{constructor(){}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-properties"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(r,o){1&r&&t.nrm(0,"router-outlet")},dependencies:[u.n3]})}}return s})(),children:[{path:"",redirectTo:"properties-list",pathMatch:"full"},{path:"properties-list",component:(()=>{class s{constructor(e,r,o,i,a){this.router=e,this.cdr=r,this.globalService=o,this.propertiesService=i,this.spinner=a,this.showSort=!0,this.showColumn=!0,this.isLoading=!1,this.destroy$=new y.B,this.propertyList=[],this.paginationRequest={},this.paginationResponseData={},this.pageLimits=this.globalService.getPageLimits()}ngOnInit(){this.getPropertyList(),this.reset()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}reset(){this.order="DESC",this.currentSort="id",this.paginationRequest={},this.page=1,this.totalResult=10,this.paginationRequest.offset=0,this.paginationRequest.pageSize=10,this.paginationRequest.sort=0,this.paginationRequest.field="id",this.paginationRequest.searchText="",this.getPropertyList()}onPageChange(e){Number(e)&&(this.paginationRequest.offset=+e-1,this.getPropertyList())}onPageLimitChange(e){let r;r=e.target.value,this.paginationRequest.pageSize=+r,this.resetPageNumber(),this.getPropertyList()}resetPageNumber(){this.page=1,this.paginationRequest.offset=0}searchCandidates(){this.resetPageNumber(),this.destroy$.next(!0),this.getPropertyList()}sortTable(e){this.currentSort!==e&&(this.order="ASC"),this.currentSort=e,this.currentSort?(this.order="ASC"===this.order?"DESC":"ASC",this.resetPageNumber(),this.paginationRequest.sort="ASC"===this.order?1:0,this.paginationRequest.field=this.currentSort,this.getPropertyList()):this.currentSort="id"}getIcon(e){return e===this.currentSort?"ASC"===this.order?"fa-sort-up":"fa-sort-down":"fa-sort"}getPropertyList(){this.isLoading=!0,this.propertiesService.propertyList(this.paginationRequest).pipe((0,h.Q)(this.destroy$),(0,d.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:e=>{console.log(e),this.paginationResponseData=e,this.totalResult=this.paginationResponseData?.response?.totalElements,this.propertyList=e?.response?.content,this.cdr.detectChanges()},error:e=>console.error(e),complete:()=>console.info("complete")})}propertiesadd(){this.router.navigate(["/jrm/properties/add-property"])}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(u.Ix),t.rXU(t.gRc),t.rXU(b.d),t.rXU(F.h),t.rXU(j.eD))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-properties-list"]],standalone:!0,features:[t.aNF],decls:38,vars:10,consts:[[1,"content-report"],[1,"container-bg"],[1,"row","m-b-10","m-0"],[1,"search-section","properties-filter-section"],[1,"properties-sub-filter"],[1,"floating-label-group"],["type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","search",1,"floating-label"],[1,"input-group-append","showCursor"],["ngbPopover","Search with Property Type","placement","bottom","popoverClass","textboxPopoverCls",1,"fas","fa-info-circle","fontawsome-icon",3,"autoClose"],["ngbTooltip","Add Property",1,"btn","btn-add-users",3,"click"],[1,"fas","fa-plus","fontawsome-icon"],[1,"row",2,"margin","0px"],[2,"display","block"],[1,"table-responsive"],[1,"table","table-theme","table-row","v-middle"],[3,"click"],["class","fa","aria-hidden","true",3,"ngClass",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["aria-hidden","true",1,"fa",3,"ngClass"],["colspan","9"],["class","chip chip-primary",4,"ngFor","ngForOf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"edit-icon"],["src","assets/images/icons/Edit.svg","ngbTooltip","Edit",1,"icons_default_size",3,"routerLink"],[1,"chip","chip-primary"],[1,"text-success"],[1,"text-danger"],[1,"row"],[1,"col-md-2","col-lg-2","col-sm-12","col-xs-12",2,"width","max-width"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","pageLength",1,"floating-label"],[1,"col-md-3","col-lg-3","col-sm-12","col-xs-12"],["for","totalResult",1,"floating-label"],[1,"col-md-7","col-lg-7","col-sm-12","col-xs-12"],[3,"pageChange","collectionSize","page","pageSize"],[3,"value"]],template:function(r,o){1&r&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),t.mxI("ngModelChange",function(a){return t.DH7(o.searchText,a)||(o.searchText=a),a}),t.k0s(),t.j41(7,"label",7),t.EFF(8,"Search "),t.k0s(),t.j41(9,"div",8),t.nrm(10,"i",9),t.k0s()()(),t.j41(11,"div",4)(12,"button",10),t.bIt("click",function(){return o.propertiesadd()}),t.nrm(13,"i",11),t.EFF(14," Add "),t.k0s()()()(),t.j41(15,"div",12)(16,"div",13)(17,"div",14)(18,"table",15)(19,"thead")(20,"tr")(21,"th",16),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(22,"Value "),t.DNE(23,S,1,1,"i",17),t.k0s(),t.j41(24,"th",16),t.bIt("click",function(){return o.sortTable("name")}),t.EFF(25,"Property Type "),t.DNE(26,L,1,1,"i",17),t.k0s(),t.j41(27,"th"),t.EFF(28,"Properties"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Active Status"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Action"),t.k0s()()(),t.j41(33,"tbody"),t.DNE(34,_,3,1,"tr",18)(35,G,13,8,"tr",19),t.nI1(36,"filter"),t.k0s()()(),t.DNE(37,N,16,6,"div",20),t.k0s()()()()),2&r&&(t.R7$(6),t.R50("ngModel",o.searchText),t.R7$(4),t.Y8G("autoClose","outside"),t.R7$(13),t.Y8G("ngIf",o.showSort),t.R7$(3),t.Y8G("ngIf",o.showSort),t.R7$(8),t.Y8G("ngIf",!o.propertyList||o.propertyList&&o.propertyList.length<1),t.R7$(),t.Y8G("ngForOf",t.i5U(36,7,o.propertyList,o.searchText)),t.R7$(2),t.Y8G("ngIf",(null==o.paginationResponseData?null:o.paginationResponseData.response)&&(null==o.propertyList?null:o.propertyList.length)))},dependencies:[v.G,P.B,g.YU,g.Sq,g.bT,u.Wk,n.xH,n.y7,n.me,n.wz,n.BC,n.YS,n.vS,m.ZM,m.md,R],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;vertical-align:middle;white-space:wrap}"]})}}return s})()},{path:"add-property",component:C},{path:"edit-property/:propertyId",component:C}]}];let O=(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(x),u.iI]})}}return s})()}}]);