"use strict";(self.webpackChunkReportGeneration=self.webpackChunkReportGeneration||[]).push([[405],{7405:(re,F,u)=>{u.r(F),u.d(F,{UserRoutingModule:()=>te});var c=u(4937),e=u(4438);let k=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-user"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(i,s){1&i&&e.nrm(0,"router-outlet")},dependencies:[c.n3]})}}return r})();var j=u(1699),R=u(1413),h=u(6977),p=u(980),E=u(3629),m=u(5447),S=u(6689),I=u(9784),y=u(1530),N=u(720),g=u(177),o=u(9417);const L=r=>["/jrm/users",r],U=(r,d)=>({"chip-active":r,"chip-inactive":d});function T(r,d){if(1&r&&(e.j41(0,"div",20)(1,"td",21),e.EFF(2),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.JRh(t.isLoading?"Please wait while loading..":"No users found..")}}function O(r,d){1&r&&(e.j41(0,"span",40),e.EFF(1,"Super Admin"),e.k0s())}function A(r,d){1&r&&(e.j41(0,"span",41),e.EFF(1,"Admin"),e.k0s())}function D(r,d){1&r&&(e.j41(0,"span",42),e.EFF(1,"Employee"),e.k0s())}function $(r,d){if(1&r&&(e.j41(0,"div",22)(1,"div",23),e.nrm(2,"img",24),e.k0s(),e.j41(3,"div",25),e.nrm(4,"img",26),e.k0s(),e.j41(5,"div",27)(6,"div",28)(7,"h6"),e.EFF(8),e.k0s()(),e.j41(9,"div",29),e.DNE(10,O,2,0,"span",30)(11,A,2,0,"span",31)(12,D,2,0,"span",32),e.k0s(),e.nrm(13,"hr",33),e.j41(14,"div",34)(15,"div",35),e.EFF(16),e.k0s(),e.j41(17,"div",36),e.EFF(18),e.k0s()(),e.j41(19,"div",37)(20,"span",38),e.EFF(21),e.k0s(),e.j41(22,"span",39),e.EFF(23),e.k0s()()()()),2&r){const t=d.$implicit,i=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(12,L,t.userId)),e.R7$(2),e.FS9("alt",t.userId),e.Y8G("src",t.profileImg,e.B4B),e.R7$(4),e.JRh(t.firstName+" "+t.lastName),e.R7$(2),e.Y8G("ngIf",t.roleValue.includes(i.rolesEnum.SUPER_ADMIN)),e.R7$(),e.Y8G("ngIf",t.roleValue.includes(i.rolesEnum.ADMIN)),e.R7$(),e.Y8G("ngIf",t.roleValue.includes(i.rolesEnum.EMPLOYEE)),e.R7$(4),e.JRh(t.email),e.R7$(2),e.JRh(t.mobilePhone),e.R7$(2),e.Y8G("ngClass",e.l_i(14,U,t.status,!t.status)),e.R7$(),e.SpI(" ",t.status?"Active":"Inactive"," "),e.R7$(2),e.JRh(t.employeeId)}}function w(r,d){if(1&r&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&r){const t=d.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function M(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",43)(1,"div",44)(2,"div",5)(3,"select",45),e.mxI("ngModelChange",function(s){e.eBV(t);const l=e.XpG();return e.DH7(l.paginationRequest.pageSize,s)||(l.paginationRequest.pageSize=s),e.Njj(s)}),e.bIt("change",function(s){e.eBV(t);const l=e.XpG();return e.Njj(l.onPageLimitChange(s))}),e.j41(4,"option",46),e.EFF(5,"Select"),e.k0s(),e.DNE(6,w,2,2,"option",47),e.k0s(),e.j41(7,"label",48),e.EFF(8,"Page Length"),e.k0s()()(),e.j41(9,"div",49)(10,"div",5)(11,"label",50),e.EFF(12),e.k0s()()(),e.j41(13,"div",51)(14,"div",5)(15,"app-custom-pagination",52),e.mxI("pageChange",function(s){e.eBV(t);const l=e.XpG();return e.DH7(l.page,s)||(l.page=s),e.Njj(s)}),e.bIt("pageChange",function(s){e.eBV(t);const l=e.XpG();return e.Njj(l.onPageChange(s))}),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.paginationRequest.pageSize),e.R7$(3),e.Y8G("ngForOf",t.pageLimits),e.R7$(6),e.SpI("Total Records: ",t.totalResult,""),e.R7$(3),e.Y8G("collectionSize",t.totalResult),e.R50("page",t.page),e.Y8G("pageSize",t.paginationRequest.pageSize)}}let G=(()=>{class r{constructor(t,i,s,l,n,a,f){this.router=t,this.cdr=i,this.calendar=s,this.formatter=l,this.globalService=n,this.usersService=a,this.spinner=f,this.rolesEnum=E.$,this.roleNames=E.A,this.showSort=!0,this.hoveredDate=null,this.status="",this.isLoading=!1,this.destroy$=new R.B,this.usersList=[],this.paginationRequest={},this.paginationResponseData={},this.pageLimits=this.globalService.getPageLimits()}ngOnInit(){this.reset()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}reset(){this.order="DESC",this.currentSort="userId",this.paginationRequest={},this.page=1,this.totalResult=10,this.paginationRequest.offset=0,this.paginationRequest.pageSize=10,this.paginationRequest.sort=0,this.paginationRequest.field="userId",this.paginationRequest.searchText="",this.getUsersList()}onPageChange(t){Number(t)&&(this.paginationRequest.offset=+t-1,this.getUsersList())}onPageLimitChange(t){let i;i=t.target.value,this.paginationRequest.pageSize=+i,this.resetPageNumber(),this.getUsersList()}resetPageNumber(){this.page=1,this.paginationRequest.offset=0}searchUsers(){this.resetPageNumber(),this.destroy$.next(!0),this.getUsersList()}sortTable(t){this.currentSort!==t&&(this.order="ASC"),this.currentSort=t,this.currentSort?(this.order="ASC"===this.order?"DESC":"ASC",this.resetPageNumber(),this.paginationRequest.sort="ASC"===this.order?1:0,this.paginationRequest.field=this.currentSort,this.getUsersList()):this.currentSort="id"}getIcon(t){return t===this.currentSort?"ASC"===this.order?"fa-sort-up":"fa-sort-down":"fa-sort"}validateInput(t,i){const s=this.formatter.parse(i);return s&&this.calendar.isValid(m.gj.from(s))?m.gj.from(s):t}getTimeinMills(t){let i=t,s=new Date;return s.setDate(i.day),s.setMonth(i.month-1),s.setFullYear(i.year),s.getTime()}getUsersList(){this.isLoading=!0,this.usersService.userList(this.paginationRequest).pipe((0,h.Q)(this.destroy$),(0,p.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:t=>{console.log(t),this.paginationResponseData=t,this.totalResult=this.paginationResponseData?.response?.totalElements;let i=t?.response?.content||[];this.globalService.IS_ADMIN&&(i=i.filter(s=>!s.roleValue.includes(this.rolesEnum.SUPER_ADMIN)),this.totalResult=i.length),this.usersList=i,this.cdr.detectChanges()},error:t=>console.error(t),complete:()=>console.info("complete")})}useradd(){this.router.navigate(["/jrm/users/create"])}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(c.Ix),e.rXU(e.gRc),e.rXU(m.iF),e.rXU(m.tN),e.rXU(S.d),e.rXU(I.g),e.rXU(y.eD))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-user-list"]],standalone:!0,features:[e.aNF],decls:22,vars:5,consts:[[1,"content-report"],[1,"container-bg"],[1,"row","m-b-2","m-0"],[1,"search-section","properties-filter-section"],[1,"properties-sub-filter"],[1,"floating-label-group"],["type","text","required","",1,"form-control",3,"ngModelChange","keyup","ngModel"],["for","search",1,"floating-label"],[1,"input-group-append","showCursor"],["ngbPopover","Search with Name / Username / Emp ID / Mobile / Email","placement","bottom","popoverClass","textboxPopoverCls",1,"fas","fa-info-circle","fontawsome-icon",3,"autoClose"],[1,"template-filter-right-section"],["ngbTooltip","Reset Filters",1,"btn","btn-reset",3,"click"],["src","assets/images/icons/reset.svg",1,"icons_default_size"],["ngbTooltip","Add User",1,"btn","btn-add-users",3,"click"],[1,"fas","fa-plus","fontawsome-icon"],[1,"row","m-0","p-0"],["class","col-xl-3 col-sm-6 mb-5",4,"ngIf"],[1,"users-box"],["class","bg-white rounded shadow-sm py-2 px-2 userlist user-card",4,"ngFor","ngForOf"],["class","row m-b-10 m-0",4,"ngIf"],[1,"col-xl-3","col-sm-6","mb-5"],["colspan","9"],[1,"bg-white","rounded","shadow-sm","py-2","px-2","userlist","user-card"],[1,"edit-icon-users"],["src","assets/images/icons/edit-users.svg","ngbTooltip","Edit",1,"icons_default_size",3,"routerLink"],[1,"userlist_left","text-center","mt-auto","mb-auto","p-0"],["width","100","onerror","this.onerror=null;this.src='assets/user-placeholder.jpg';",1,"user_img",3,"src","alt"],[1,"userlist_bottom"],[1,"username_edit"],[1,"user_role"],["class","superadmin_color chip chip-default",4,"ngIf"],["class","admin_color chip chip-default",4,"ngIf"],["class","employee_color chip chip-default",4,"ngIf"],[2,"border","1px dashed #6E6E6E"],[1,"status_roles"],[1,"useremail"],[1,"usermobile"],[1,"empid_mobile"],[1,"chip","chip-active","user_status","m-0",3,"ngClass"],[1,"chip","chip-default","employee_id","m-0"],[1,"superadmin_color","chip","chip-default"],[1,"admin_color","chip","chip-default"],[1,"employee_color","chip","chip-default"],[1,"row","m-b-10","m-0"],[1,"col-md-2","col-lg-2","col-sm-12","col-xs-12"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","pageLength",1,"floating-label"],[1,"col-md-3","col-lg-3","col-sm-12","col-xs-12"],["for","totalResult",1,"floating-label"],[1,"col-md-7","col-lg-7","col-sm-12","col-xs-12"],[3,"pageChange","collectionSize","page","pageSize"],[3,"value"]],template:function(i,s){1&i&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),e.mxI("ngModelChange",function(n){return e.DH7(s.paginationRequest.searchText,n)||(s.paginationRequest.searchText=n),n}),e.bIt("keyup",function(){return s.searchUsers()}),e.k0s(),e.j41(7,"label",7),e.EFF(8,"Search "),e.k0s(),e.j41(9,"div",8),e.nrm(10,"i",9),e.k0s()()()(),e.j41(11,"div",10)(12,"button",11),e.bIt("click",function(){return s.reset()}),e.nrm(13,"img",12),e.k0s(),e.j41(14,"button",13),e.bIt("click",function(){return s.useradd()}),e.nrm(15,"i",14),e.EFF(16," Add "),e.k0s()()(),e.j41(17,"div",15),e.DNE(18,T,3,1,"div",16),e.j41(19,"div",17),e.DNE(20,$,24,17,"div",18),e.k0s()(),e.DNE(21,M,16,6,"div",19),e.k0s()()),2&i&&(e.R7$(6),e.R50("ngModel",s.paginationRequest.searchText),e.R7$(4),e.Y8G("autoClose","outside"),e.R7$(8),e.Y8G("ngIf",!s.usersList||!(null!=s.usersList&&s.usersList.length)),e.R7$(2),e.Y8G("ngForOf",s.usersList),e.R7$(),e.Y8G("ngIf",(null==s.paginationResponseData?null:s.paginationResponseData.response)&&(null==s.usersList?null:s.usersList.length)))},dependencies:[j.G,N.B,g.YU,g.Sq,g.bT,c.Wk,o.xH,o.y7,o.me,o.wz,o.BC,o.YS,o.vS,m.ZM,m.md]})}}return r})();var _=function(r){return r[r.SECURITY_ANALYST=1]="SECURITY_ANALYST",r[r.SECURITY_ENGINEER=2]="SECURITY_ENGINEER",r[r.INCIDENT_RESPONDER=13]="INCIDENT_RESPONDER",r[r.THREAT_HUNTER=4]="THREAT_HUNTER",r[r.SOC_MANAGER=5]="SOC_MANAGER",r[r.COMPLIANCE_OFFICER=6]="COMPLIANCE_OFFICER",r[r.CISO=7]="CISO",r}(_||{}),V=u(2144),P=u(1471),Y=u(3464);let z=(()=>{class r{constructor(t){this.apiService=t,this.url="/roles"}rolesList(){return this.apiService.get(this.url+"/roles-list")}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(Y.G))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var q=u(2177),B=u(3482);const X=r=>({required:r}),J=r=>({required:r});function Z(r,d){if(1&r&&(e.j41(0,"span",57),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.errorMsg)}}function H(r,d){if(1&r&&(e.j41(0,"option",58),e.EFF(1),e.k0s()),2&r){const t=d.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.description," ")}}function K(r,d){if(1&r&&e.nrm(0,"angular2-multiselect",59),2&r){const t=e.XpG();e.Y8G("data",t.filteredRolesList)("settings",t.rolesSettings)}}function Q(r,d){if(1&r&&e.nrm(0,"angular2-multiselect",62),2&r){const t=e.XpG(2);e.Y8G("data",t.designationList)("settings",t.designationSettings)}}function W(r,d){if(1&r&&(e.j41(0,"div",10)(1,"div",11),e.DNE(2,Q,1,2,"angular2-multiselect",60),e.j41(3,"label",61),e.EFF(4,"Designation"),e.k0s(),e.j41(5,"small",14),e.EFF(6),e.k0s()()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.designationList&&t.designationList.length>0),e.R7$(),e.Y8G("ngClass",e.eq3(3,J,t.isFieldRequired("designation"))),e.R7$(3),e.JRh(t.getErrorMessage("designation","Designation"))}}let C=(()=>{class r{constructor(t,i,s,l,n,a,f,v,se){this.router=t,this.route=i,this.fb=s,this.globalService=l,this.usersService=n,this.rolesService=a,this.spinner=f,this.modalService=v,this.propertiesService=se,this.designationEnum=_,this.propertyValuesEnum=V.p,this.isRoleDisabled=!1,this.rolesEnum=E.$,this.rolesSettings={},this.designationSettings={},this.userId=this.globalService.getUserId(),this.isLoading=!1,this.showError=!1,this.errorMsg="",this.destroy$=new R.B,this.isEdit=!1,this.userForm=new o.gE({}),this.userObj={},this.idToEdit=0,this.rolesList=[];let b=new Date;this.maxDate={day:b.getDate(),month:b.getMonth()+1,year:b.getFullYear()},this.minDate={day:b.getDate(),month:b.getMonth()+1,year:b.getFullYear()},this.route.snapshot.params&&this.route.snapshot.params.userId&&(this.isEdit=!0,this.idToEdit=+this.route.snapshot.params.userId,this.getRolesList(),this.getPropertiesData([this.propertyValuesEnum.DESIGNATION]),this.getUserData())}ngOnInit(){this.rolesSettings={singleSelection:!1,primaryKey:"roleValue",labelKey:"roleName",text:"Select Roles",selectAllText:"Select All",unSelectAllText:"UnSelect All",disabled:this.isRoleDisabled,badgeShowLimit:3,enableSearchFilter:!0,noDataAvailablePlaceholderText:"There is no item availabale to show"},this.designationSettings={singleSelection:!1,primaryKey:"value",labelKey:"description",text:"Select Designations Type",selectAllText:"Select All",unSelectAllText:"UnSelect All",badgeShowLimit:4,enableSearchFilter:!0,noDataAvailablePlaceholderText:"There is no item availabale to show"},this.getPropertiesData([this.propertyValuesEnum.DESIGNATION,this.propertyValuesEnum.GENDER]),this.getRolesList(),this.buildForm()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}getPropertiesData(t){if(!t||0===t.length)return void console.warn("No property IDs passed.");const i={[this.propertyValuesEnum.DESIGNATION]:"designationList",[this.propertyValuesEnum.GENDER]:"genderList"};this.isLoading=!0,this.propertiesService.getPropertyValuesListFromMultipleIds(t).pipe((0,h.Q)(this.destroy$),(0,p.j)(()=>{this.isLoading=!1})).subscribe({next:s=>{console.log("Fetched Data:",s),s.forEach((l,n)=>{const a=i[t[n]];if(a){const f=(l.propertyValues||[]).filter(v=>!0===v.status||1===v.status);this[a]=f,console.log(`Assigned ${a} (Active Only):`,f)}})},error:s=>console.error("Error fetching property values:",s),complete:()=>console.info("Property values fetch complete")})}getRolesList(){this.isLoading=!0,this.rolesService.rolesList().pipe((0,h.Q)(this.destroy$),(0,p.j)(()=>{this.isLoading=!1})).subscribe({next:t=>{console.log(t),this.rolesList=t,this.filteredRolesList=this.rolesList.filter(i=>i.roleValue!==this.rolesEnum.SUPER_ADMIN),this.isEdit||this.buildForm()},error:t=>console.error(t),complete:()=>console.info("complete")})}getUserData(){this.isLoading=!0,this.usersService.viewUser(this.idToEdit).pipe((0,h.Q)(this.destroy$),(0,p.j)(()=>{this.isLoading=!1})).subscribe({next:t=>{console.log(t),this.userObj=t,this.buildForm()},error:t=>console.error(t),complete:()=>console.info("complete")})}buildForm(){const t=this.isEdit&&this.userObj.roleValue?this.getRoleNameFromValue(this.userObj.roleValue):[];if(!this.isEdit&&!t.some(s=>s.roleValue===this.rolesEnum.EMPLOYEE)){const s=this.rolesList.find(l=>l.roleValue===this.rolesEnum.EMPLOYEE);s&&t.push(s)}let i=this.isEdit&&this.userObj.designation?this.getDesignationTypeFromValue(this.userObj.designation):[];this.userForm=this.fb.group({username:[this.userObj.username,[o.k0.required,o.k0.minLength(4),o.k0.maxLength(128),o.k0.pattern("^$|^([a-zA-Z]+([a-zA-Z0-9._]+)*)*$")]],password:[this.userObj.password,this.passwordValidations()],employeeId:[this.userObj.employeeId,[o.k0.required,o.k0.minLength(4),o.k0.maxLength(128),o.k0.pattern("^$|^([a-zA-Z]+([a-zA-Z0-9]+)*)*$")]],firstName:[this.userObj.firstName,[o.k0.required,o.k0.minLength(3),o.k0.maxLength(128),o.k0.pattern("^$|^([a-zA-Z]+([a-zA-Z .()-]+)*)*$")]],middleName:[this.userObj.middleName,[o.k0.minLength(3),o.k0.maxLength(128),o.k0.pattern("^$|^([a-zA-Z]+([a-zA-Z .()-]+)*)*$")]],lastName:[this.userObj.lastName,[o.k0.required,o.k0.minLength(3),o.k0.maxLength(128),o.k0.pattern("^$|^([a-zA-Z]+([a-zA-Z .()-]+)*)*$")]],gender:[this.userObj.gender,[o.k0.required]],dob:[this.getDateObjFromMillis(this.userObj.dob),[o.k0.required]],mobile:[this.userObj.mobilePhone,[o.k0.required,o.k0.minLength(10),o.k0.maxLength(10),o.k0.pattern("^$|^[0-9]{10}$")]],email:[this.userObj.email,[o.k0.required,o.k0.minLength(4),o.k0.maxLength(128),o.k0.pattern("^$|^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$")]],comments:[this.userObj.comments,[]],role:[t,[o.k0.required]],status:[0==this.userObj.status?0:1,[o.k0.required]],designation:[i||[],this.getValidators("designation")]}),this.isEdit&&this.userObj.roleValue[0]===this.rolesEnum.SUPER_ADMIN&&this.globalService.IS_SUPER_ADMIN&&(this.isRoleDisabled=!0,this.rolesSettings=Object.assign({},this.rolesSettings,{disabled:this.isRoleDisabled}))}setDateFromDateObj(t,i){let s,l=i.controls[t].value;if(l){let n=new Date;n.setDate(l.day),n.setMonth(l.month-1),n.setFullYear(l.year),s=n.getTime()}else s=null;return s}getDateObjFromMillis(t){let i;if(t){let s=new Date(t);i={day:s.getDate(),month:s.getMonth()+1,year:s.getFullYear()}}return i}cancel(){this.router.navigate(["/jrm/users"])}getErrorMessage(t,i){let s="";return s=this.globalService.getErrorMessage(this.userForm,t,i),s}isFieldRequired(t){return!this.globalService.IS_SUPER_ADMIN&&"designation"===t}getValidators(t){return this.globalService.IS_SUPER_ADMIN?"designation"===t?[]:void 0:[o.k0.required]}passwordValidations(){let t=[o.k0.minLength(6),o.k0.maxLength(128),o.k0.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{6,}$/)];return this.isEdit||t.push(o.k0.required),t}roleValidations(){let t=[];return this.isEdit||t.push(o.k0.required),t}getRoleNameFromValue(t){return t&&this.rolesList?t.map(i=>this.rolesList.find(l=>l.roleValue===i)):[]}getDesignationTypeFromValue(t){return t&&this.designationList?t.map(i=>{const s=this.designationList.find(l=>l.value===i);return console.log("Designation Type for value",i,":",s),s}).filter(i=>i):[]}onPassowrdChange(t){let i;i=t.target.value,this.userForm.controls.password.setValue(i),this.userForm.controls.password.markAsTouched()}handleFileSelect(t){if(!this.validateFile(t))return;const i=t.target.files,s=i[0];if(s.type.match(/image-*/)){if(t.target.files[0].size/1024/1024>5)this.globalService.showAlert("Error","File size exceeds 5 MB");else if(i&&s){const a=new FileReader;a.onload=this._handleReaderLoadedSign.bind(this),a.readAsBinaryString(s)}}else this.globalService.showAlert("Error","Supported formats .jpg or .jpeg or .png !")}_handleReaderLoadedSign(t){this.fileBase64=btoa(t.target.result)}validateFile(t){const i=["jpeg","jpg","png"],s=t.target.value.split(".").pop().toLowerCase();let l=!1;for(let a in i)if(s===i[a]){this.fileExtentionType=s,l=!0;break}return l||alert("Allowed Extensions are : *."+i.join(", *.")),t.target.files[0].size/1024/1024>5?(this.globalService.showAlert("Error","File size exceeds 5 MB"),null):l}submit(){if(this.showError=!1,!this.userForm.valid)return void this.globalService.showAlert("Error","Please enter all mandatory fields !");this.userObj.username=this.userForm.controls.username.value,this.userObj.employeeId=this.userForm.controls.employeeId.value,this.userObj.firstName=this.userForm.controls.firstName.value,this.userObj.middleName=this.userForm.controls.middleName.value,this.userObj.lastName=this.userForm.controls.lastName.value,this.userObj.gender=this.userForm.controls.gender.value,this.userObj.dob=this.setDateFromDateObj("dob",this.userForm),this.userObj.mobilePhone=this.userForm.controls.mobile.value,this.userObj.email=this.userForm.controls.email.value,this.userObj.roleValue=this.userForm.controls.role.value.map(s=>s.roleValue),this.userObj.status=1==this.userForm.controls.status.value?1:0,this.userObj.comments=this.userForm.controls.comments.value,this.userObj.metaStatus=1,this.userObj.loggedIn=0,this.userObj.designation=this.userForm.controls.designation.value.map(s=>s.value);let i=this.userForm.controls.password.value;if(i&&""!==i.trim()){let s=(0,P.SHA256)(i).toString();this.userObj.password=s}else this.userObj.password=i;this.fileExtentionType&&this.fileBase64&&(this.userObj.profileImg="data:application/"+this.fileExtentionType+";base64,"+this.fileBase64),this.isLoading=!0,this.spinner.start(),this.isEdit?(this.userObj.userId=this.idToEdit,this.isEdit&&this.userObj.roleValue.toString()!==this.userForm.controls.role.value.toString()&&(this.userObj.createdById=this.globalService.getUserId(),this.userObj.createdDate=(new Date).getTime()),this.userObj.updatedById=this.globalService.getUserId(),this.userObj.updatedDate=(new Date).getTime(),this.usersService.editUser(this.userObj).pipe((0,h.Q)(this.destroy$),(0,p.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:s=>{console.log(s),s?(this.globalService.showAlert("Success","User updated successfully !"),this.router.navigate(["/jrm/users"])):(this.showError=!0,this.errorMsg="Unable to update User !",this.globalService.showAlert("Error","Unable to update User !"))},error:s=>{console.error(s),this.showError=!0;let l=s?.error?.message?s?.error?.message:"Error in updating User !";l=this.globalService.beautifyErrorMsg(l),this.errorMsg=l,this.globalService.showAlert("Error",l)},complete:()=>console.info("complete")})):(this.userObj.createdById=this.globalService.getUserId(),this.usersService.addUser(this.userObj).pipe((0,h.Q)(this.destroy$),(0,p.j)(()=>{this.isLoading=!1,this.spinner.stop()})).subscribe({next:s=>{console.log(s),s?(this.globalService.showAlert("Success","User created successfully !"),this.router.navigate(["/jrm/users"])):(this.showError=!0,this.errorMsg="Unable to create User !",this.globalService.showAlert("Error","Unable to create User !"))},error:s=>{console.error(s),this.showError=!0;let l=s?.error?.message?s?.error?.message:"Error in creating User !";l=this.globalService.beautifyErrorMsg(l),this.errorMsg=l,this.globalService.showAlert("Error",l)},complete:()=>console.info("complete")}))}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(c.Ix),e.rXU(c.nX),e.rXU(o.ok),e.rXU(S.d),e.rXU(I.g),e.rXU(z),e.rXU(y.eD),e.rXU(m.Bq),e.rXU(q.h))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-user-form"]],standalone:!0,features:[e.aNF],decls:130,vars:25,consts:[["passwordRef",""],["do","ngbDatepicker"],[1,"content-report"],[1,"container-bg"],[1,"row","m-b-2","m-0"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-12","col-lg-12","col-sm-12","col-xs-12"],["class","text-danger float-right",4,"ngIf"],[1,"col-md-3","col-lg-3","col-sm-6","col-xs-6"],[1,"floating-label-group"],["type","text","formControlName","username","ngbTooltip","Alphanumeric and special char [dot(.), underscore(_)] are allowed","placeholder"," ",1,"form-control"],["for","username",1,"floating-label","required"],[1,"errormessage"],["type","password","formControlName","password","ngbTooltip"," Must contain atleast 1 uppercase, 1 lowercase, 1 special character and digit",1,"form-control",3,"hidden"],["type","password","ngbTooltip"," Must contain atleast 1 uppercase, 1 lowercase, 1 special character and digit","value","******","placeholder"," ",1,"form-control",3,"keyup","click","hidden"],["for","password",1,"floating-label",3,"ngClass"],["type","text","formControlName","employeeId","ngbTooltip","Alphabets and Numbers are allowed","placeholder"," ",1,"form-control"],["for","employeeId",1,"floating-label","required"],["type","text","formControlName","firstName","placeholder"," ",1,"form-control"],["for","firstName",1,"floating-label","required"],["type","text","formControlName","middleName",1,"form-control"],["for","middleName",1,"floating-label"],["type","text","formControlName","lastName","placeholder"," ",1,"form-control"],["for","lastName",1,"floating-label","required"],["formControlName","gender",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-group-append","showCursor"],[1,"fa","fa-angle-down"],["for","gender",1,"floating-label","required"],[1,"col-md-4","col-lg-3","col-sm-6","col-xs-6"],["type","text","formControlName","dob","placeholder"," ","ngbDatepicker","","readonly","","placement","bottom",1,"form-control",3,"maxDate"],[1,"input-group-append-date","showCursor"],[1,"fa-solid","fa-calendar-days","input-group-text",3,"click"],["for","dob",1,"floating-label-date","required"],["type","text","formControlName","mobile","ngbTooltip","Only Numbers are allowed","placeholder"," ",1,"form-control"],["for","mobile",1,"floating-label","required"],["type","text","formControlName","email","ngbTooltip","Pattern Eg. john@email.com","placeholder"," ",1,"form-control"],["for","email",1,"floating-label","required"],["style","font-size: small; ","formControlName","role",3,"data","settings",4,"ngIf"],["for","role",1,"floating-label-multiselect","required"],["formControlName","status",1,"form-control"],["value","1"],["value","0"],["src","assets/images/icons/arrow-down-fill.svg"],["for","status",1,"floating-label","required"],["formControlName","comments","placeholder"," ",1,"form-control"],["for","comments",1,"floating-label"],["id","upload","type","file","name","file-upload","accept",".png, .jpg , .jpeg","required","",1,"form-control",3,"change"],["for","resume",1,"floating-label-file"],["class","col-md-3 col-lg-3 col-sm-6 col-xs-6",4,"ngIf"],[1,"row","m-3"],[1,"col-md-12","text-right"],["type","reset",1,"btn-closed","m-r-15",3,"click","disabled"],["type","submit",1,"btn-submit-all"],[1,"text-danger","float-right"],[3,"value"],["formControlName","role",2,"font-size","small",3,"data","settings"],["style","font-size: small; ","formControlName","designation",3,"data","settings",4,"ngIf"],["for","designation",1,"floating-label-multiselect",3,"ngClass"],["formControlName","designation",2,"font-size","small",3,"data","settings"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div")(5,"form",6),e.bIt("ngSubmit",function(){return e.eBV(l),e.Njj(s.submit())}),e.j41(6,"div",7)(7,"div",8),e.DNE(8,Z,2,1,"span",9),e.k0s(),e.j41(9,"div",10)(10,"div",11),e.nrm(11,"input",12),e.j41(12,"label",13),e.EFF(13,"Username"),e.k0s(),e.j41(14,"small",14),e.EFF(15),e.k0s()()(),e.j41(16,"div",10)(17,"div",11),e.nrm(18,"input",15),e.j41(19,"input",16,0),e.bIt("keyup",function(a){return e.eBV(l),e.Njj(s.onPassowrdChange(a))})("click",function(){e.eBV(l);const a=e.sdS(20);return e.Njj("******"!=a.value&&null!=a&&null!=a.value&&a.value.trim()?a.value:a.value="")}),e.k0s(),e.j41(21,"label",17),e.EFF(22,"Password"),e.k0s(),e.j41(23,"small",14),e.EFF(24),e.k0s()()(),e.j41(25,"div",10)(26,"div",11),e.nrm(27,"input",18),e.j41(28,"label",19),e.EFF(29,"Employee ID"),e.k0s(),e.j41(30,"small",14),e.EFF(31),e.k0s()()(),e.j41(32,"div",10)(33,"div",11),e.nrm(34,"input",20),e.j41(35,"label",21),e.EFF(36,"First Name"),e.k0s(),e.j41(37,"small",14),e.EFF(38),e.k0s()()(),e.j41(39,"div",10)(40,"div",11),e.nrm(41,"input",22),e.j41(42,"label",23),e.EFF(43,"Middle Name"),e.k0s(),e.j41(44,"small",14),e.EFF(45),e.k0s()()(),e.j41(46,"div",10)(47,"div",11),e.nrm(48,"input",24),e.j41(49,"label",25),e.EFF(50,"Last Name"),e.k0s(),e.j41(51,"small",14),e.EFF(52),e.k0s()()(),e.j41(53,"div",10)(54,"div",11)(55,"select",26)(56,"option",27),e.EFF(57,"Select Gender"),e.k0s(),e.DNE(58,H,2,2,"option",28),e.k0s(),e.j41(59,"div",29),e.nrm(60,"i",30),e.k0s(),e.j41(61,"label",31),e.EFF(62,"Gender"),e.k0s(),e.j41(63,"small",14),e.EFF(64),e.k0s()()(),e.j41(65,"div",32)(66,"div",11),e.nrm(67,"input",33,1),e.j41(69,"div",34)(70,"i",35),e.bIt("click",function(){e.eBV(l);const a=e.sdS(68);return e.Njj(a.toggle())}),e.k0s()(),e.j41(71,"label",36),e.EFF(72,"Date of Birth"),e.k0s(),e.j41(73,"small",14),e.EFF(74),e.k0s()()(),e.j41(75,"div",10)(76,"div",11),e.nrm(77,"input",37),e.j41(78,"label",38),e.EFF(79,"Mobile"),e.k0s(),e.j41(80,"small",14),e.EFF(81),e.k0s()()(),e.j41(82,"div",10)(83,"div",11),e.nrm(84,"input",39),e.j41(85,"label",40),e.EFF(86,"Email"),e.k0s(),e.j41(87,"small",14),e.EFF(88),e.k0s()()(),e.j41(89,"div",10)(90,"div",11),e.DNE(91,K,1,2,"angular2-multiselect",41),e.j41(92,"label",42),e.EFF(93,"Role"),e.k0s(),e.j41(94,"small",14),e.EFF(95),e.k0s()()(),e.j41(96,"div",10)(97,"div",11)(98,"select",43)(99,"option",27),e.EFF(100,"Select"),e.k0s(),e.j41(101,"option",44),e.EFF(102,"Active"),e.k0s(),e.j41(103,"option",45),e.EFF(104,"Inactive"),e.k0s()(),e.j41(105,"div",29),e.nrm(106,"img",46),e.k0s(),e.j41(107,"label",47),e.EFF(108,"Status"),e.k0s(),e.j41(109,"small",14),e.EFF(110),e.k0s()()(),e.j41(111,"div",10)(112,"div",11),e.nrm(113,"textarea",48),e.j41(114,"label",49),e.EFF(115,"Comments"),e.k0s(),e.j41(116,"small",14),e.EFF(117),e.k0s()()(),e.j41(118,"div",10)(119,"div",11)(120,"input",50),e.bIt("change",function(a){return e.eBV(l),e.Njj(s.handleFileSelect(a))}),e.k0s(),e.j41(121,"label",51),e.EFF(122,"Change Profile Image"),e.k0s()()(),e.DNE(123,W,7,5,"div",52),e.k0s(),e.j41(124,"div",53)(125,"div",54)(126,"button",55),e.bIt("click",function(){return e.eBV(l),e.Njj(s.cancel())}),e.EFF(127,"Cancel"),e.k0s(),e.j41(128,"button",56),e.EFF(129,"Submit"),e.k0s()()()()()()()()()}2&i&&(e.R7$(5),e.Y8G("formGroup",s.userForm),e.R7$(3),e.Y8G("ngIf",s.showError),e.R7$(7),e.JRh(s.getErrorMessage("username","Username")),e.R7$(3),e.Y8G("hidden",s.isEdit),e.R7$(),e.Y8G("hidden",!s.isEdit),e.R7$(2),e.Y8G("ngClass",e.eq3(23,X,!s.isEdit)),e.R7$(3),e.JRh(s.getErrorMessage("password","Password")),e.R7$(7),e.JRh(s.getErrorMessage("employeeId","Employee ID")),e.R7$(7),e.JRh(s.getErrorMessage("firstName","First Name")),e.R7$(7),e.JRh(s.getErrorMessage("middleName","Middle Name")),e.R7$(7),e.JRh(s.getErrorMessage("lastName","Last Name")),e.R7$(6),e.Y8G("ngForOf",s.genderList),e.R7$(6),e.JRh(s.getErrorMessage("gender","Gender")),e.R7$(3),e.Y8G("maxDate",s.maxDate),e.R7$(7),e.JRh(s.getErrorMessage("dob","Date of Birth")),e.R7$(7),e.JRh(s.getErrorMessage("mobile","Mobile")),e.R7$(7),e.JRh(s.getErrorMessage("email","Email")),e.R7$(3),e.Y8G("ngIf",s.filteredRolesList&&s.filteredRolesList.length>0),e.R7$(4),e.JRh(s.getErrorMessage("role","Role")),e.R7$(15),e.JRh(s.getErrorMessage("status","Status")),e.R7$(7),e.JRh(s.getErrorMessage("comments","Comments")),e.R7$(6),e.Y8G("ngIf",!(s.globalService.IS_SUPER_ADMIN&&s.userObj.userId===s.globalService.getUserId())),e.R7$(3),e.Y8G("disabled",s.isLoading))},dependencies:[j.G,g.YU,g.Sq,g.bT,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD,m.md,m.cw,B.Cr]})}}return r})();const ee=[{path:"",component:k,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:G},{path:"create",component:C},{path:":userId",component:C}]}];let te=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(ee),c.iI]})}}return r})()}}]);